import{q as e,s as t,v as a,E as l,D as s,M as o,u as n,r as i,c as A,J as r,o as u,d as c,w as d,f as p,N as g,j as m,t as v,C,g as E,h as f,i as k,F as D,B as I,K as h,O as Q,k as w,l as y,P as F,x as B,z as S,_ as R}from"./index-vD9K1hjN.js";import{_ as b}from"./uv-tabs.CltVmK14.js";import{S as V,N as q,_ as x}from"./NotError.DtERstPQ.js";import{_ as G}from"./uv-button.BUtZYl1y.js";import{s as O}from"./setTabbarText.DWKggaPX.js";import{u as U}from"./user.B5PP7E8R.js";import"./uv-line-progress.1y_4wCSj.js";import"./date.B8FaB0HV.js";import"./uv-loading-icon.BqizWf9_.js";const J=R(e({__name:"task",setup(e){const R=t({lineColor:"#FF2442",activeStyle:{color:"#FF2442"},inactiveStyle:{color:"#4B5563"},list:[{name:a.t("page.task.1")},{name:a.t("component.order.1"),disabled:!0},{name:a.t("component.order.2"),disabled:!0}],lineWidth:"100",lineHeight:"2",current:0,scrollable:!1}),J=t([{id:1,icon:"../../static/task/praise.png",title:a.t("component.order.3"),teskTitle:a.t("component.order.7"),num:0},{id:2,icon:"../../static/task/forwarding.png",title:a.t("component.order.4"),teskTitle:a.t("component.order.8"),num:0},{id:3,icon:"../../static/task/concern.png",title:a.t("component.order.5"),teskTitle:a.t("component.order.9"),num:0},{id:4,icon:"../../static/task/star.png",title:a.t("component.order.6"),teskTitle:a.t("component.order.10"),num:0}]),K=t(),j=t(0),T=t(),Y=(e=8)=>{const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return Array.from({length:e}).map((()=>t.charAt(Math.floor(Math.random()*t.length)))).join("")},H=t(Array.from({length:8}).map(((e,t)=>({id:t+1,icon:`/static/task/avatar${t+1}.jpg`,name:Y(8)})))),N=U(),Z=t([]),W=t([]),M=t({period_number:"",start_time:"",end_time:"",status:"",is_expired:!1,remaining_time:0,like_amount:0,share_amount:0,forward_amount:0,favorite_amount:0}),L=t(""),_=({index:e})=>{0===e?R.value.current=e:h({url:"/pages/order/order?type="+e})},z=(e,t)=>{const a=e.value.findIndex((e=>JSON.stringify(e)===JSON.stringify(t)));-1===a?e.value.push(t):e.value.splice(a,1),t.teskTitle&&(j.value=e.value.length)},P=l((()=>{const e={};return J.value.forEach((t=>{switch(t.id){case 1:e[t.title]="like_count";break;case 2:e[t.title]="share_count";break;case 3:e[t.title]="follow_count";break;case 4:e[t.title]="favorite_count"}})),e})),X=()=>{var e;const t={amount:Number(K.value),profit_amount:90,like_count:0,share_count:0,follow_count:0,favorite_count:0,period_number:(null==(e=null==M?void 0:M.value)?void 0:e.period_number)??""};Z.value.forEach((e=>{const a=P.value[e.title];a&&(t[a]=1)})),0!==t.amount?a.service.order$create(t).then((e=>{e.success(((e,t)=>{$(),Q({title:a.t("other.3"),icon:"none"})}))})):a.showToast(a.t("page.task.8"))},$=()=>{K.value=0,j.value=0,Z.value=[]},ee=e=>{T.value=e.value*j.value};s([K,j],(()=>{T.value=K.value*j.value||0}),{immediate:!0});const te=()=>{N.user.has_group_buy_qualification&&L.value?a.dialogFun(V,{}):a.dialogFun(q,{})},ae=t(0);let le;const se=e=>{!e||e<=0?ne():(ae.value=e,le&&clearInterval(le),le=setInterval((()=>{ae.value>0?ae.value--:(clearInterval(le),ne())}),1e3))},oe=()=>{setTimeout((()=>{ne()}),1e4)},ne=()=>{try{a.service.order$period({}).then((e=>e.success((e=>{M.value=e,"number"==typeof(null==e?void 0:e.remaining_time)?se(e.remaining_time):oe()}))))}catch(e){oe()}};return o((()=>{ne(),N.fetchUserInfo(),a.service.groupBuy$activeDetail({}).then((e=>{e.success((e=>{L.value=e.has_data}))}))})),n((()=>{O()})),(e,t)=>{const l=i(A("uv-tabs"),b),s=w,o=y,n=S,h=i(A("uv-number-box"),x),Q=i(A("uv-button"),G),V=F,q=r("bt-page");return u(),c(q,{tabbar:"",padding:0},{default:d((()=>[p(s,{class:"task content"},{default:d((()=>[p(s,{class:"head"},{default:d((()=>[p(l,g(R.value,{onClick:_}),null,16)])),_:1}),0==R.value.current?(u(),c(V,{key:0,"scroll-y":"",class:"body body0 animate__animated animate__fadeInLeft"},{default:d((()=>[p(s,{class:"title"},{default:d((()=>[p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[m(v(C(a).t("page.order.3"))+":",1)])),_:1}),M.value.period_number?(u(),c(o,{key:0},{default:d((()=>[m("["+v(M.value.period_number)+"]",1)])),_:1})):E("",!0)])),_:1}),p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[m(v(C(a).t("page.task.3"))+":",1)])),_:1}),p(o,null,{default:d((()=>{return[m(v((e=ae.value,`00:${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`)),1)];var e})),_:1})])),_:1})])),_:1}),p(s,{class:"subTitle"},{default:d((()=>[m(v(C(a).t("page.task.4")),1)])),_:1}),p(s,{class:"type"},{default:d((()=>[(u(!0),f(D,null,k(J.value,((e,t)=>(u(),c(s,{class:B(["item",Z.value.some((t=>t.id===e.id))?"select":""]),key:t,onClick:t=>{z(Z,e)}},{default:d((()=>[p(s,null,{default:d((()=>[p(n,{src:e.icon,mode:"aspectFill"},null,8,["src"])])),_:2},1024),I("p",null,v(e.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),p(s,{class:"avatar"},{default:d((()=>[(u(!0),f(D,null,k(H.value,((e,t)=>(u(),c(s,{class:B(["item",W.value.some((t=>t.id===e.id))?"select":""]),key:t,onClick:t=>{z(W,e)}},{default:d((()=>[p(s,null,{default:d((()=>[p(n,{src:e.icon,mode:"aspectFill"},null,8,["src"])])),_:2},1024),I("p",null,v(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),p(s,{class:"task-detail"},{default:d((()=>[p(s,{class:"detail-top"},{default:d((()=>[I("img",{src:"data:image/png;base64,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",alt:""}),m(" "+v(C(a).t("page.task.10")),1)])),_:1}),p(s,{class:"detail-input"},{default:d((()=>[p(h,{onChange:ee,modelValue:K.value,"onUpdate:modelValue":t[0]||(t[0]=e=>K.value=e),min:0,integer:"",inputWidth:100},null,8,["modelValue"])])),_:1}),p(s,{class:"task-detail-item"},{default:d((()=>[p(Q,{color:"#abc8e9",text:C(a).t("page.task.9"),onClick:$},null,8,["text"]),p(s,{class:"word"},{default:d((()=>[m(v(C(a).t("page.task.11",{num:j.value,total:T.value})),1)])),_:1}),p(Q,{text:C(a).t("page.task.7"),shape:"circle",color:"#FF0036",onClick:X},null,8,["text"])])),_:1})])),_:1}),p(s,{class:"together"},{default:d((()=>[p(Q,{text:C(a).t("page.task.6"),color:"#FF0036",onClick:te},null,8,["text"])])),_:1})])),_:1})):E("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-fc52c229"]]);export{J as default};
