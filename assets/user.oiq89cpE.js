import{a2 as e,I as r,v as s}from"./index-CTwYRwII.js";const t=e("user",{state:()=>({user:null,token:r.token||""}),actions:{async fetchUserInfo(){if(!r.token)throw new Error("没有 token，无法获取用户信息");try{await s.service.auth$profile({}).then((e=>{e.success((e=>{this.user=e.user}))})).catch((e=>{throw new Error("获取用户信息失败: "+e.message)}))}catch(e){throw console.error("获取用户信息失败",e),new Error("获取用户信息失败")}},clearUser(){this.user=null,this.token="",r.token=""}}});export{t as u};
